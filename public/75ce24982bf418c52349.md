---
title: ã€SwiftUIã€‘ã‚¢ãƒ—ãƒªèµ·å‹•åºƒå‘Šã®è¡¨ç¤ºæ–¹æ³•
tags:
  - iOS
  - adMob
  - Swift
  - SwiftUI
private: false
updated_at: '2023-05-12T00:39:42+09:00'
id: 75ce24982bf418c52349
organization_url_name: null
slide: false
ignorePublish: false
---
ç¬¬0éƒ¨: [ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](https://qiita.com/SNQ-2001/items/44f3446ce0966c78641b)

ç¬¬1éƒ¨: [ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Š](https://qiita.com/SNQ-2001/items/253173abefc6f90f86ea)
ç¬¬2éƒ¨: [ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«åºƒå‘Š](https://qiita.com/SNQ-2001/items/5590a55324c39582a9ef)
ç¬¬3éƒ¨: [ãƒã‚¤ãƒ†ã‚£ãƒ–åºƒå‘Š](https://qiita.com/SNQ-2001/items/7151fdcb8e9f8c2c42c2)
ç¬¬4éƒ¨: [ãƒãƒŠãƒ¼åºƒå‘Š](https://qiita.com/SNQ-2001/items/9bf389475cb5995469a0)
ç¬¬5éƒ¨: [ã‚¢ãƒ—ãƒªèµ·å‹•åºƒå‘Š](https://qiita.com/SNQ-2001/items/75ce24982bf418c52349) â† ã‚¤ãƒã‚³ã‚³

# ã¯ã˜ã‚ã«
AdMobåºƒå‘Šã‚·ãƒªãƒ¼ã‚ºç¬¬5éƒ¨ã§ã™
ä»Šå›ã¯[ã‚¢ãƒ—ãƒªèµ·å‹•åºƒå‘Š](https://developers.google.com/admob/ios/app-open)ã§ã™ã€‚

ã‚¢ãƒ—ãƒªèµ·å‹•åºƒå‘Šã¯å…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«Swiftã§ã®å®Ÿè£…æ–¹æ³•ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ãªã„(Objective-Cã®ã¿)ã®ã§ãŠãã‚‰ãå„ªå…ˆåº¦ãŒã‹ãªã‚Šä½ã„åºƒå‘Šãƒ¦ãƒ‹ãƒƒãƒˆãªã‚“ã ã¨æ€ã‚ã‚Œã¾ã™ã€‚

åºƒå‘Šã®è¦‹ãŸç›®ã¯ã“ã®ã‚ˆã†ãªæ„Ÿã˜ã§ã™ã€‚
![simulator_screenshot_64872B5E-B9C2-4B84-BC4F-F07B6CD335E5.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1745371/2797ed48-55ff-a271-39e2-e1e5dfd3dba2.png)

# å®Ÿè£…æº–å‚™
å®Ÿè£…ã®å‰ã«[ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](https://developers.google.com/admob/ios/quick-start?hl=ja)ã«è¨˜è¼‰ã—ã¦ã‚ã‚‹äº‹ã‚’è¡Œã„ã¾ã™

â‘ : Mobile Ads SDK ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â‘¡: Info.plist ã®æ›´æ–°
â‘¢: Mobile Ads SDK ã®åˆæœŸåŒ–

[ã“ã¡ã‚‰](https://qiita.com/SNQ-2001/items/44f3446ce0966c78641b)ã§è©³ã—ãè§£èª¬ã—ã¦ã‚ã‚Šã¾ã™ã€‚
ã“ã‚ŒãŒçµ‚ã‚ã‚Œã°æº–å‚™ã¯å®Œäº†ã§ã™ã€‚

# å®Ÿè£…
```AppOpen.swift
import GoogleMobileAds

class AppOpen: NSObject, GADFullScreenContentDelegate, ObservableObject {

    @Published var appOpenAdLoaded: Bool = false
    var appOpenAd: GADAppOpenAd?

    override init() {
        super.init()
        loadAppOpenAd()
    }

    func loadAppOpenAd() {
        let request = GADRequest()
        GADAppOpenAd.load(
            withAdUnitID: "ca-app-pub-3940256099942544/5662855259",
            request: request,
            orientation: UIInterfaceOrientation.portrait
        ) { appOpenAdIn, _ in
            self.appOpenAd = appOpenAdIn
            self.appOpenAd?.fullScreenContentDelegate = self
            self.appOpenAdLoaded = true
            print("ğŸŠ: æº–å‚™å®Œäº†ã—ã¾ã—ãŸ")
        }
    }

    func presentAppOpenAd() {
        guard let root = self.appOpenAd else { return }
        root.present(fromRootViewController: (UIApplication.shared.windows.first?.rootViewController)!)
    }

    func ad(_ ad: GADFullScreenPresentingAd, didFailToPresentFullScreenContentWithError error: Error) {
        self.loadAppOpenAd()
        print("ğŸ˜­: ã‚¨ãƒ©ãƒ¼ -> \(error)")
    }

    func adDidDismissFullScreenContent(_ ad: GADFullScreenPresentingAd) {
        self.loadAppOpenAd()
        print("ğŸ…: é–‰ã˜ã¾ã—ãŸ")
    }
}
```

```AdMob_AppOpen_DemoApp.swift
import SwiftUI
import GoogleMobileAds

class AppDelegate: NSObject, UIApplicationDelegate {
    func application(
        _ application: UIApplication,
        didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil
    ) -> Bool {
        GADMobileAds.sharedInstance().start(completionHandler: nil)
        return true
    }
}

@main
struct AdMob_AppOpen_DemoApp: App {
    @UIApplicationDelegateAdaptor(AppDelegate.self) var appDelegate
    @StateObject var appOpen = AppOpen()
    var body: some Scene {
        WindowGroup {
            ContentView()
        }
        .onChange(of: appOpen.appOpenAdLoaded) { newValue in
            appOpen.presentAppOpenAd()
        }
    }
}
```
![appopen.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1745371/baec517e-13d7-9605-d25c-60fe7bc1507b.gif)


# è§£èª¬
ä»Šã¾ã§ã®åºƒå‘Šè¡¨ç¤ºå½¢å¼ã¨ã¡ã‚‡ã£ã¨é•ã†ã®ã§è»½ãè§£èª¬ã—ã¾ã™ã€‚

ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¦ã™ãåºƒå‘Šã‚’èª­ã¿è¾¼ã¿ã¾ã™
```swift
override init() {
    super.init()
    loadAppOpenAd()
}
```
èª­ã¿è¾¼ã¿ãŒå®Œäº†ã—ãŸã‚‰`appOpenAdLoaded`ã¨ã„ã†ãƒ•ãƒ©ã‚°ã‚’`true`ã«å¤‰æ›´ã—ã¾ã™
```swift
func loadAppOpenAd() {
    let request = GADRequest()
    GADAppOpenAd.load(
        withAdUnitID: "ca-app-pub-3940256099942544/5662855259",
        request: request,
        orientation: UIInterfaceOrientation.portrait
    ) { appOpenAdIn, _ in
        self.appOpenAd = appOpenAdIn
        self.appOpenAd?.fullScreenContentDelegate = self
        self.appOpenAdLoaded = true
        print("ğŸŠ: æº–å‚™å®Œäº†ã—ã¾ã—ãŸ")
    }
}
```
`XXXApp.swift`ã®æ–¹ã§`onChange`ã‚’ä½¿ç”¨ã—ã¦å¤‰æ›´ãŒæ¤œçŸ¥ã•ã‚ŒãŸã‚‰`presentAppOpenAd()`ãŒå®Ÿè¡Œã•ã‚Œã¾ã™
```swift
WindowGroup {
    ContentView()
}
.onChange(of: appOpen.appOpenAdLoaded) { newValue in
    appOpen.presentAppOpenAd()
}
```

# ãŠã‚ã‚Š
ä»Šå›ã®å®Œæˆã‚µãƒ³ãƒ—ãƒ«ã§ã™ã€‚
å‚è€ƒã«ã—ã¦ãã ã•ã„

https://github.com/SNQ-2001/AdMob-AppOpen-Demo
