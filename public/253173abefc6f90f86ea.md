---
title: ã€SwiftUIã€‘ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Šã®è¡¨ç¤º
tags:
  - iOS
  - adMob
  - Swift
  - SwiftUI
private: false
updated_at: '2022-06-05T17:21:03+09:00'
id: 253173abefc6f90f86ea
organization_url_name: null
slide: false
ignorePublish: false
---
ç¬¬0éƒ¨: [ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](https://qiita.com/SNQ-2001/items/44f3446ce0966c78641b)

ç¬¬1éƒ¨: [ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Š](https://qiita.com/SNQ-2001/items/253173abefc6f90f86ea) â† ã‚¤ãƒã‚³ã‚³
ç¬¬2éƒ¨: [ã‚¤ãƒ³ã‚¿ãƒ¼ã‚¹ãƒ†ã‚£ã‚·ãƒ£ãƒ«åºƒå‘Š](https://qiita.com/SNQ-2001/items/5590a55324c39582a9ef)
ç¬¬3éƒ¨: [ãƒã‚¤ãƒ†ã‚£ãƒ–åºƒå‘Š](https://qiita.com/SNQ-2001/items/7151fdcb8e9f8c2c42c2)
ç¬¬4éƒ¨: [ãƒãƒŠãƒ¼åºƒå‘Š](https://qiita.com/SNQ-2001/items/9bf389475cb5995469a0)
ç¬¬5éƒ¨: [ã‚¢ãƒ—ãƒªèµ·å‹•åºƒå‘Š](https://qiita.com/SNQ-2001/items/75ce24982bf418c52349)

# ã¯ã˜ã‚ã«
å¤šãã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯UIKitã§æ›¸ã‹ã‚Œã¦ã„ã¦SwiftUIã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ã‚ã‚Šã¾ã›ã‚“ã€‚
ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’è¦‹ã¦æ¯å›æ›¸ãç›´ã™ã®ã¯è‹¦ç—›ã§ã™ã€‚æ¥½ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚
ä»Šå›ã®ãŠé¡Œã§ã‚ã‚‹[AdMobã®ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Šãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://developers.google.com/admob/ios/rewarded?hl=ja)ã‚‚UIKitã§æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚
ä»Šå¾Œã€åŒã˜äº‹ã‚’ã™ã‚‹ã§ã‚ã‚ã†æ–¹ã®ãŸã‚ã«æ›¸ãç›´ã—ãŸã‚‚ã®ã‚’å…¬é–‹ã—ã¦ãŠãã¾ã™ã€‚

# å®Ÿè£…æº–å‚™
å®Ÿè£…ã®å‰ã«[ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰](https://developers.google.com/admob/ios/quick-start?hl=ja)ã«è¨˜è¼‰ã—ã¦ã‚ã‚‹äº‹ã‚’è¡Œã„ã¾ã™

â‘ : Mobile Ads SDK ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
â‘¡: Info.plist ã®æ›´æ–°
â‘¢: Mobile Ads SDK ã®åˆæœŸåŒ–

[ã“ã¡ã‚‰](https://qiita.com/SNQ-2001/items/44f3446ce0966c78641b)ã§è©³ã—ãè§£èª¬ã—ã¦ã‚ã‚Šã¾ã™ã€‚
ã“ã‚ŒãŒçµ‚ã‚ã‚Œã°æº–å‚™ã¯å®Œäº†ã§ã™ã€‚

# å®Ÿè£…
```Reward.swift
import GoogleMobileAds

class Reward: NSObject, GADFullScreenContentDelegate, ObservableObject {
    @Published var rewardLoaded: Bool = false
    var rewardedAd: GADRewardedAd?

    override init() {
        super.init()
    }

    // ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Šã®èª­ã¿è¾¼ã¿
    func LoadReward() {
        GADRewardedAd.load(withAdUnitID: "ca-app-pub-3940256099942544/1712485313", request: GADRequest()) { (ad, error) in
            if let _ = error {
                print("ğŸ˜­: èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ")
                self.rewardLoaded = false
                return
            }
            print("ğŸ˜: èª­ã¿è¾¼ã¿ã«æˆåŠŸã—ã¾ã—ãŸ")
            self.rewardLoaded = true
            self.rewardedAd = ad
            self.rewardedAd?.fullScreenContentDelegate = self
        }
    }

    // ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Šã®è¡¨ç¤º
    func ShowReward() {
        let root = UIApplication.shared.windows.first?.rootViewController
        if let ad = rewardedAd {
            ad.present(fromRootViewController: root!, userDidEarnRewardHandler: {
                print("ğŸ˜: å ±é…¬ã‚’ç²å¾—ã—ã¾ã—ãŸ")
                self.rewardLoaded = false
            })
        } else {
            print("ğŸ˜­: åºƒå‘Šã®æº–å‚™ãŒã§ãã¦ã„ã¾ã›ã‚“ã§ã—ãŸ")
            self.rewardLoaded = false
            self.LoadReward()
        }
    }
}
```

```ContentView.swift
import SwiftUI

struct ContentView: View {
    @ObservedObject var reward = Reward()
    var body: some View {
        Button(action: {
            reward.ShowReward()
        }) {
            Text(reward.rewardLoaded ? "ãƒªãƒ¯ãƒ¼ãƒ‰åºƒå‘Šè¡¨ç¤º" : "èª­ã¿è¾¼ã¿ä¸­...")
        }
        .onAppear() {
            reward.LoadReward()
        }
        .disabled(!reward.rewardLoaded)
    }
}
```
![Videotogif.gif](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1745371/58263995-950e-c4f3-f2d0-60d8716d2d99.gif)

# ãŠã‚ã‚Š
ä»Šå›ä½œæˆã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç½®ã„ã¨ãã®ã§å‚è€ƒã«ã—ã¦ãã ã•ã„ã€‚

https://github.com/SNQ-2001/AdMob-Reward-Demo
